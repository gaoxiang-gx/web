webpackJsonp([14],{"1RjY":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-table[data-v-b37456f4] .warning-row {\n  background: #ffb7ba;\n}\n.el-table[data-v-b37456f4] .success-row {\n  background: #d6fdc1;\n}\n",""])},"8rkp":function(t,e,a){var n=a("1RjY");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("79a7c936",n,!0)},kOZV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),i=a.n(n),r=a("cAgV"),s=a("UgCr"),o=a("0xDb"),l={components:{},name:"inventoryExpend",directives:{waves:r.a},data:function(){return{tableKey:0,scrollTop:0,list:null,columnList:[],total:null,listLoading:!1,listQuery:{date_range:[Object(o.a)(new Date((new Date).getTime()-6048e5),"{y}-{m}-{d}"),Object(o.a)(new Date,"{y}-{m}-{d}")],warehouse_id:void 0,page:1,page_size:20,sort:"-id"},warehouseOptions:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},methods:{handleFilter:function(){this.listQuery.page=1,this.getList()},getWarehouseList:function(){var t=this;Object(s.q)().then(function(e){t.warehouseOptions=e.data.data})},getTotal:function(t){var e=0,a=0;for(var n in t)e+=t[n].new_order_out+t[n].repurchase_order_out,a+=Math.abs(t[n].new_order_in)+Math.abs(t[n].repurchase_order_in);return Math.abs(a-e)},getformat:function(t){var e="";return e+=t.getFullYear()+"-",t.getMonth()+1<10?e+="0"+(t.getMonth()+1)+"-":e+=t.getMonth()+1+"-",t.getDate()<10?e+="0"+t.getDate():e+=t.getDate(),e},getDateArry:function(t,e){this.columnList=[];var a=t.split("-"),n=e.split("-"),i=new Date;i.setUTCFullYear(a[0],a[1]-1,a[2]);var r=new Date;r.setUTCFullYear(n[0],n[1]-1,n[2]);for(var s=i.getTime(),o=r.getTime(),l=s;l<=o;)this.columnList.push(this.getformat(new Date(parseInt(l))).toString()),l+=864e5;return this.columnList},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(0===a||a===this.columnList.length+1)return e%2==0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},tableRowClassName:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;return 0!==a&&a!==this.columnList.length+1&&(e%2==1?"warning-row":e%2==0?"success-row":"")},getList:function(){var t=this;this.listLoading=!0,this.getDateArry(this.listQuery.date_range[0],this.listQuery.date_range[1]),Object(s.l)(this.listQuery).then(function(e){++t.tableKey,console.log(t.tableKey),t.list=t.getlist2(e.data),t.listLoading=!1})},getlist2:function(t){for(var e=0;e<t.length;e++)if(void 0!==t[e]){var a=i()({},t[e]);t.splice(e,0,a),e+=1}for(var n=0;n<t.length;n++)t[n].index=n;return t}},created:function(){this.getList(),this.getWarehouseList()},deactivated:function(){this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop},activated:function(){window.scrollTo(0,this.scrollTop)}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("el-date-picker",{staticClass:"filter-item",attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",align:"right","unlink-panels":"",clearable:!1,"range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.handleFilter},model:{value:t.listQuery.date_range,callback:function(e){t.$set(t.listQuery,"date_range",e)},expression:"listQuery.date_range"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"仓库"},on:{change:t.handleFilter},model:{value:t.listQuery.warehouse_id,callback:function(e){t.$set(t.listQuery,"warehouse_id",e)},expression:"listQuery.warehouse_id"}},t._l(t.warehouseOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"background-color":"#d6fdc1",height:"20px"}})]),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticStyle:{padding:"0",margin:"0","text-align":"center",height:"20px","line-height":"20px","font-size":"12px"}},[t._v("购买")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"background-color":"#ffb7ba",height:"20px"}})]),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticStyle:{padding:"0",margin:"0","text-align":"center",height:"20px","line-height":"20px","font-size":"12px"}},[t._v("退货")])])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"给我一点时间",border:"","span-method":t.objectSpanMethod,"cell-class-name":t.tableRowClassName,fit:""}},[a("el-table-column",{attrs:{align:"center",label:"商品","min-width":"100",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.goods_name))]),a("br"),t._v(" "),a("span",[t._v(t._s(e.row.goods_sku_name))])]}}])}),t._v(" "),t._l(t.columnList,function(e){return a("el-table-column",{key:Math.random(),attrs:{align:"center",label:e+"\n新粉 / 复购","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row.index%2==0?a("span",[t._v(t._s(Math.abs(n.row.data[e].new_order_out))+" / "+t._s(Math.abs(n.row.data[e].repurchase_order_out)))]):a("span",[t._v(t._s(n.row.data[e].new_order_in)+" / "+t._s(n.row.data[e].repurchase_order_in))])]}}])})}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"合计","min-width":"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.getTotal(e.row.data)))])]}}])})],2)],1)])},staticRenderFns:[]},d=a("VU/8")(l,c,!1,function(t){a("8rkp")},"data-v-b37456f4",null);e.default=d.exports}});