webpackJsonp([12],{"Mk/B":function(e,t,a){var n=a("PsAB");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("9ad8d2c6",n,!0)},PsAB:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-table[data-v-e72c8a80] .warning-row {\n  background: #ffb7ba;\n}\n.el-table[data-v-e72c8a80] .success-row {\n  background: #d6fdc1;\n}\n",""])},kOZV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),i=a.n(n),r=a("cAgV"),s=a("UgCr"),o=a("0xDb"),l={components:{},name:"inventoryExpend",directives:{waves:r.a},data:function(){return{tableKey:0,scrollTop:0,list:null,columnList:[],total:null,listLoading:!1,listQuery:{date_range:[Object(o.a)(new Date((new Date).getTime()-6048e5),"{y}-{m}-{d}"),Object(o.a)(new Date,"{y}-{m}-{d}")],warehouse_id:void 0,page:1,page_size:20,sort:"-id"},warehouseOptions:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{handleFilter:function(){this.listQuery.page=1,this.getList()},getWarehouseList:function(){var e=this;Object(s.q)().then(function(t){e.warehouseOptions=t.data.data})},getTotal:function(e){var t=0,a=0;for(var n in e)t+=e[n].new_order_out+e[n].repurchase_order_out,a+=Math.abs(e[n].new_order_in)+Math.abs(e[n].repurchase_order_in);return Math.abs(a-t)},getformat:function(e){var t="";return t+=e.getFullYear()+"-",e.getMonth()+1<10?t+="0"+(e.getMonth()+1)+"-":t+=e.getMonth()+1+"-",e.getDate()<10?t+="0"+e.getDate():t+=e.getDate(),t},getDateArry:function(e,t){this.columnList=[];var a=e.split("-"),n=t.split("-"),i=new Date;i.setUTCFullYear(a[0],a[1]-1,a[2]);var r=new Date;r.setUTCFullYear(n[0],n[1]-1,n[2]);for(var s=i.getTime(),o=r.getTime(),l=s;l<=o;)this.columnList.push(this.getformat(new Date(parseInt(l))).toString()),l+=864e5;return this.columnList},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a||a===this.columnList.length+1)return t%2==0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},tableRowClassName:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;return 0!==a&&a!==this.columnList.length+1&&(t%2==1?"warning-row":t%2==0?"success-row":"")},getList:function(){var e=this;this.listLoading=!0,this.getDateArry(this.listQuery.date_range[0],this.listQuery.date_range[1]),Object(s.l)(this.listQuery).then(function(t){++e.tableKey,console.log(e.tableKey),e.list=e.getlist2(t.data),e.listLoading=!1})},getlist2:function(e){for(var t=0;t<e.length;t++)if(void 0!==e[t]){var a=i()({},e[t]);e.splice(t,0,a),t+=1}for(var n=0;n<e.length;n++)e[n].index=n;return e}},created:function(){this.getList(),this.getWarehouseList()},deactivated:function(){this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop},activated:function(){window.scrollTo(0,this.scrollTop)}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("el-date-picker",{staticClass:"filter-item",attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",align:"right","unlink-panels":"",clearable:!1,"range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleFilter},model:{value:e.listQuery.date_range,callback:function(t){e.$set(e.listQuery,"date_range",t)},expression:"listQuery.date_range"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"仓库"},on:{change:e.handleFilter},model:{value:e.listQuery.warehouse_id,callback:function(t){e.$set(e.listQuery,"warehouse_id",t)},expression:"listQuery.warehouse_id"}},e._l(e.warehouseOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")])],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"background-color":"#d6fdc1",height:"20px"}})]),e._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticStyle:{padding:"0",margin:"0","text-align":"center",height:"20px","line-height":"20px","font-size":"12px"}},[e._v("购买")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"background-color":"#ffb7ba",height:"20px"}})]),e._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticStyle:{padding:"0",margin:"0","text-align":"center",height:"20px","line-height":"20px","font-size":"12px"}},[e._v("退货")])])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"给我一点时间",border:"","span-method":e.objectSpanMethod,"cell-class-name":e.tableRowClassName,fit:""}},[a("el-table-column",{attrs:{align:"center",label:"商品","min-width":"100",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.goods_name))]),a("br"),e._v(" "),a("span",[e._v(e._s(t.row.goods_sku_name))])]}}])}),e._v(" "),e._l(e.columnList,function(t){return a("el-table-column",{key:Math.random(),attrs:{align:"center",label:t+"\n新粉 / 复购","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.index%2==0?a("span",[e._v(e._s(Math.abs(n.row.data[t].new_order_out))+" / "+e._s(Math.abs(n.row.data[t].repurchase_order_out)))]):a("span",[e._v(e._s(n.row.data[t].new_order_in)+" / "+e._s(n.row.data[t].repurchase_order_in))])]}}])})}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"合计","min-width":"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.getTotal(t.row.data)))])]}}])})],2)],1)])},staticRenderFns:[]},d=a("VU/8")(l,c,!1,function(e){a("Mk/B")},"data-v-e72c8a80",null);t.default=d.exports}});