webpackJsonp([11],{YdJH:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},ehrR:function(n,e,t){var i=t("YdJH");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("7784e6fe",i,!0)},hlSR:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("woOf"),a=t.n(i),r=t("cAgV"),o=t("UgCr"),s=t("vLgD"),l=t("cjZW"),d=t("Z5Fx"),p=t("RUzx"),c={components:{Multiselect:t.n(p).a},name:"deliverAddressSetting",directives:{waves:r.a},data:function(){return{temp_id:void 0,tableKey:0,scrollTop:0,list:null,total:null,listLoading:!1,textMap:{update:"编辑",create:"创建"},dialogStatus:void 0,dialogFormVisible:!1,logisticsTypeOptions:[],logisticsTypeOptions_sf:[],logisticsTypeOptions_yt:[],logisticsTypeLoading:!1,logisticsTypeLoading_sf:!1,logisticsTypeLoading_yt:!1,productOptions:[],productLoading:!1,listQuery:{page:1,page_size:20,sort:"-id"},stateOptions:[{id:0,label:"有效操作"},{id:1,label:"无效操作"}],causeOptions:[{id:0,label:"系统原因"},{id:1,label:"发货错误"}],temp:{name:void 0,sender_phone:void 0,sender_name:void 0,delivery_province:void 0,delivery_city:void 0,delivery_district:void 0,delivery_address:void 0,delivery_post_code:void 0,finance_group:{id:void 0,group_name:""},warehouse_group:{id:void 0,group_name:""}},rules:{name:[{required:!0,message:"填写名称",trigger:"change"}],sender_name:[{required:!0,message:"填写发货人姓名",trigger:"change"}],sender_phone:[{required:!0,message:"填写发货人电话",trigger:"change"}],delivery_province:[{required:!0,message:"填写省份",trigger:"change"}],delivery_city:[{required:!0,message:"填写城市",trigger:"change"}],delivery_district:[{required:!0,message:"填写区县",trigger:"change"}],delivery_post_code:[{required:!0,message:"填写邮编",trigger:"change"}]},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(n){var e=new Date,t=new Date;t.setTime(t.getTime()-6048e5),n.$emit("pick",[t,e])}},{text:"最近一个月",onClick:function(n){var e=new Date,t=new Date;t.setTime(t.getTime()-2592e6),n.$emit("pick",[t,e])}},{text:"最近三个月",onClick:function(n){var e=new Date,t=new Date;t.setTime(t.getTime()-7776e6),n.$emit("pick",[t,e])}}]},financeGroupOptions:[],warehouseGroupOptions:[]}},methods:{queryWarehouseGroupList:function(n){var e=this;Object(l.e)().then(function(n){n.data&&(e.warehouseGroupOptions=n.data.map(function(n){return{id:n.id,group_name:n.group_name}}))})},queryFinanceGroupList:function(n){var e=this;(function(n){return Object(s.a)({url:"/api/finance/getFinanceGroupList",method:"post",data:n})})().then(function(n){n.data&&(e.financeGroupOptions=n.data.map(function(n){return{id:n.id,group_name:n.group_name}}))})},handleFilter:function(){this.listQuery.page=1,this.getList()},getList:function(){var n=this;this.listLoading=!0,Object(o.q)(this.listQuery).then(function(e){n.list=e.data.data,n.total=e.data.total,n.listLoading=!1})},handleCreate:function(){var n=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){n.$refs.dataForm.clearValidate()})},createData:function(){var n=this;this.$refs.dataForm.validate(function(e){e&&(void 0!==n.temp.finance_group&&(n.temp.finance_group_id=n.temp.finance_group.id),void 0!==n.temp.warehouse_group&&(n.temp.warehouse_group_id=n.temp.warehouse_group.id),Object(o.e)(n.temp).then(function(e){n.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),n.dialogFormVisible=!1,n.getList()}))})},handleUpdate:function(n){this.temp_id=n.id,this.dialogStatus="update",this.dialogFormVisible=!0,this.temp.name=n.name,this.temp.sender_name=n.sender_name,this.temp.sender_phone=n.sender_phone,this.temp.delivery_province=n.delivery_province,this.temp.delivery_city=n.delivery_city,this.temp.delivery_district=n.delivery_district,this.temp.delivery_post_code=n.delivery_post_code,this.temp.delivery_address=n.delivery_address,this.temp.finance_group=n.finance_group,this.temp.warehouse_group=n.warehouse_group,this.financeGroupOptions=[],this.warehouseGroupOptions=[]},updateData:function(){var n=this;this.$refs.dataForm.validate(function(e){if(e){void 0!==n.temp.finance_group&&(n.temp.finance_group_id=n.temp.finance_group.id),void 0!==n.temp.warehouse_group&&(n.temp.warehouse_group_id=n.temp.warehouse_group.id);var t=a()({id:n.temp_id},n.temp);Object(o.v)(t).then(function(e){n.$message({title:"成功",message:"修改成功",type:"success",duration:2e3}),n.dialogFormVisible=!1,n.getList()})}})},queryLogisticsTypeList:function(n){var e=this;""!==n&&(this.logisticsTypeLoading=!0,Object(d.v)({logistics_name:n}).then(function(n){e.logisticsTypeOptions=n.data.data,e.logisticsTypeLoading=!1}))},getProductDeliverExtrasf:function(){var n=this;this.logisticsTypeLoading_sf=!0,Object(o.r)({order_logistics_type_id:1}).then(function(e){n.logisticsTypeOptions_sf=e.data.data,n.logisticsTypeLoading_sf=!1})},getProductDeliverExtrayt:function(){var n=this;this.logisticsTypeLoading_yt=!0,Object(o.r)({order_logistics_type_id:6}).then(function(e){n.logisticsTypeOptions_yt=e.data.data,n.logisticsTypeLoading_yt=!1})},getProductList:function(n){var e=this;""!==n&&(this.productLoading=!0,Object(o.j)({product_name:n,is_promote:1}).then(function(n){e.productOptions=n.data.data,e.productLoading=!1}))},handleSizeChange:function(n){this.listQuery.page_size=n,this.getList()},handleCurrentChange:function(n){this.listQuery.page=n,this.getList()}},watch:{dialogFormVisible:function(n){n||(this.$refs.dataForm.resetFields(),this.temp={name:void 0,sender_phone:void 0,sender_name:void 0,delivery_province:void 0,delivery_city:void 0,delivery_district:void 0,delivery_address:void 0,delivery_post_code:void 0,product_deliver_extra_ids:[],product_ids:[],order_logistics_type_ids:[],product_deliver_extra_sf:void 0,product_deliver_extra_yt:void 0})}},created:function(){this.getList(),this.getProductList(" "),this.queryLogisticsTypeList(" "),this.getProductDeliverExtrasf(),this.getProductDeliverExtrayt()}},u={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container calendar-list-container"},[t("div",{staticClass:"filter-container"},[t("div",{staticClass:"filter-float"},[t("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:n.handleCreate}},[n._v("创建发货库")])],1)]),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}],key:n.tableKey,staticStyle:{width:"100%"},attrs:{data:n.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":"",stripe:""}},[t("el-table-column",{attrs:{align:"center",label:"ID",width:"60"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.id))])]}}])}),n._v(" "),t("el-table-column",{attrs:{align:"center",label:"仓库名","min-width":"300"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.name))])]}}])}),n._v(" "),t("el-table-column",{attrs:{align:"center",label:"所属库管部门","min-width":"300"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.warehouse_group.group_name))])]}}])}),n._v(" "),t("el-table-column",{attrs:{align:"center",label:"所属财务部门","min-width":"300"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.finance_group.group_name))])]}}])}),n._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作","min-width":"150"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){n.handleUpdate(e.row)}}},[n._v("编辑")])]}}])})],1),n._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!n.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"","current-page":n.listQuery.page,"page-sizes":[10,20,30],"page-size":n.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:n.total},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange,"update:currentPage":function(e){n.$set(n.listQuery,"page",e)}}})],1),n._v(" "),t("el-dialog",{attrs:{title:n.textMap[n.dialogStatus],visible:n.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){n.dialogFormVisible=e}}},[t("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{rules:n.rules,model:n.temp,"label-position":"left","label-width":"150px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"库名称",prop:"name"}},[t("el-input",{model:{value:n.temp.name,callback:function(e){n.$set(n.temp,"name",e)},expression:"temp.name"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"寄件地（省）",prop:"delivery_province"}},[t("el-input",{model:{value:n.temp.delivery_province,callback:function(e){n.$set(n.temp,"delivery_province",e)},expression:"temp.delivery_province"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"寄件地（市）",prop:"delivery_city"}},[t("el-input",{model:{value:n.temp.delivery_city,callback:function(e){n.$set(n.temp,"delivery_city",e)},expression:"temp.delivery_city"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"寄件地（区）",prop:"delivery_district"}},[t("el-input",{model:{value:n.temp.delivery_district,callback:function(e){n.$set(n.temp,"delivery_district",e)},expression:"temp.delivery_district"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"寄件邮编",prop:"delivery_post_code"}},[t("el-input",{model:{value:n.temp.delivery_post_code,callback:function(e){n.$set(n.temp,"delivery_post_code",e)},expression:"temp.delivery_post_code"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"发货地址（详细）",prop:"delivery_address"}},[t("el-input",{model:{value:n.temp.delivery_address,callback:function(e){n.$set(n.temp,"delivery_address",e)},expression:"temp.delivery_address"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"发货人姓名",prop:"sender_name"}},[t("el-input",{model:{value:n.temp.sender_name,callback:function(e){n.$set(n.temp,"sender_name",e)},expression:"temp.sender_name"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"发货人电话",prop:"sender_phone"}},[t("el-input",{model:{value:n.temp.sender_phone,callback:function(e){n.$set(n.temp,"sender_phone",e)},expression:"temp.sender_phone"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"财务部门",prop:"finance_group"}},[t("multiselect",{attrs:{options:n.financeGroupOptions,placeholder:"搜索财务部门",selectLabel:"选择",deselectLabel:"删除","track-by":"group_name",internalSearch:!1,label:"group_name"},on:{"search-change":n.queryFinanceGroupList},model:{value:n.temp.finance_group,callback:function(e){n.$set(n.temp,"finance_group",e)},expression:"temp.finance_group"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"库管部门",prop:"warehouse_group"}},[t("multiselect",{attrs:{options:n.warehouseGroupOptions,placeholder:"搜索库管部门",selectLabel:"选择",deselectLabel:"删除","track-by":"group_name",internalSearch:!1,label:"group_name"},on:{"search-change":n.queryWarehouseGroupList},model:{value:n.temp.warehouse_group,callback:function(e){n.$set(n.temp,"warehouse_group",e)},expression:"temp.warehouse_group"}})],1)],1)],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.dialogFormVisible=!1}}},[n._v("取 消")]),n._v(" "),"create"===n.dialogStatus?t("el-button",{attrs:{type:"primary"},on:{click:n.createData}},[n._v("确 定")]):t("el-button",{attrs:{type:"primary"},on:{click:n.updateData}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]},_=t("VU/8")(c,u,!1,function(n){t("ehrR")},"data-v-d59c3646",null);e.default=_.exports}});