webpackJsonp([44],{"8xhp":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("aA9S"),a=i.n(s),n=i("Ydgi"),o=(i("NMdo"),i("H0KO")),r={name:"agentsroos",directives:{waves:i("cAgV").a},data:function(){return{scrollTop:0,tableKey:0,list:null,total:null,listLoading:!0,listQuery:{page:1,page_size:20,user_account_department_id:void 0,group_name:void 0,sort:"-id"},importanceOptions:[1,2,3],sortOptions:[{label:"按ID升序列",key:"+id"},{label:"按ID降序",key:"-id"}],statusOptions:["published","draft","deleted"],showAuditor:!1,temp:{id:void 0,group_name:"",pid:void 0},defaultProps:{children:"child",label:"group_name"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建"},rules:{group_name:[{required:!0,message:"填写小组名称",trigger:"change"}]},userAccountGroupTree:[],payOptions:[],userDepaerOptions:[],payLoading:!1,typeDisable:!1,groupBackground:"danger"}},filters:{statusFilter:function(t){return{published:"success",draft:"info",deleted:"danger"}[t]}},created:function(){this.getList(),this.getUserAccountGroupTree()},deactivated:function(){this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop},activated:function(){this.getList(),this.getUserAccountGroupTree(),window.scrollTo(0,this.scrollTop)},methods:{handlecheck:function(t){var e=this.$refs.tree.getCheckedKeys();1===e.length?(this.$refs.tree.setCheckedKeys([t.id]),this.temp.pid=t.id):0===e.length?(this.$refs.tree.setCheckedKeys([]),this.temp.pid=void 0):(this.$refs.tree.setCheckedKeys([t.id]),this.temp.pid=t.id)},getUserAccountGroupTree:function(){var t=this;Object(n.d)().then(function(e){t.userAccountGroupTree=e.data})},getUserAccountList:function(t){var e=this;""!==t&&(this.payLoading=!0,Object(o.a)({nickname:t,status:1}).then(function(t){e.payOptions=t.data.data.map(function(t){return{id:t.id,nickname:t.nickname}}),e.payLoading=!1}))},getList:function(){var t=this;this.listLoading=!0,Object(n.c)(this.listQuery).then(function(e){t.list=e.data.data,t.total=e.data.total,t.listLoading=!1})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.page_size=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作成功",type:"success"}),t.status=e},resetTemp:function(){this.temp={id:void 0,group_name:"",pid:void 0}},handleCreate:function(){var t=this;this.getUserAccountGroupTree(),this.resetTemp(),this.typeDisable=!1,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.tree.setCheckedKeys([]),t.$refs.dataForm.clearValidate()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&Object(n.a)(t.temp).then(function(e){t.getList(),t.dialogFormVisible=!1,t.total++,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})})},handleUpdate:function(t){var e=this;this.payOptions=[],null!==t.pay_to_user_account&&0!==t.pay_to_user_account&&(this.payOptions=[t.pay_to_user_account]),this.temp=a()({},t),this.typeDisable=!0,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var i={};i.group_name=t.temp.group_name,i.user_account_group_id=t.temp.id,i.user_account_department_id=t.temp.user_account_department_id,i.user_account_type_id=t.temp.user_account_type.id,Object(n.e)(i).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})}})},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={user_account_group_id:t.id};Object(n.b)(i).then(function(i){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var s=e.list.indexOf(t);e.list.splice(s,1),e.total--})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确 定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确 定")])],1)])},staticRenderFns:[]},u=i("/Xao")(r,c,!1,null,null,null);e.default=u.exports}});